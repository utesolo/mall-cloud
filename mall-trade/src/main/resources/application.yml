spring:
  application:
    name: mall-trade
  profiles:
    active: local
  config:
    import: optional:nacos:${spring.application.name}.${spring.cloud.nacos.config.file-extension:yml}
  cloud:
    nacos:
      discovery:
        server-addr: ${nacos.server-addr:localhost:8848}
      config:
        server-addr: ${nacos.server-addr:localhost:8848}
        file-extension: yml
    openfeign:
      circuitbreaker:
        enabled: true
      client:
        config:
          default:
            connect-timeout: 5000
            read-timeout: 10000
            logger-level: full


server:
  port: 8084

# Zipkin tracing configuration
management:
  tracing:
    sampling:
      probability: 0.1  # Default 10%, overridden by SmartSampler
  zipkin:
    tracing:
      endpoint: http://localhost:9411/api/v2/spans

# Custom tracing configuration
tracing:
  enabled: true
  default-probability: 0.1  # Non-important paths: 10%
  important-probability: 1.0  # Important paths: 100%
  important-paths:
    - /order
    - /payment
    - /match
    - /planting-plan/create
    - /planting-plan/update
  ignore-paths:
    - /actuator
    - /health
    - /favicon

logging:
  level:
    xyh.dp.mall: debug
    org.springframework.cloud.openfeign: debug
